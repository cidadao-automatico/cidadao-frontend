<!--
// Copyright 2012/2013 de Gustavo Steinberg, Flavio Soares, Pierre Andrews, Gustavo Salazar Torres, Thomaz Abramo
//
// Este arquivo é parte do programa Vigia Político. O projeto Vigia
// Político é um software livre; você pode redistribuí-lo e/ou
// modificá-lo dentro dos termos da GNU Affero General Public License
// como publicada pela Fundação do Software Livre (FSF); na versão 3 da
// Licença. Este programa é distribuído na esperança que possa ser útil,
// mas SEM NENHUMA GARANTIA; sem uma garantia implícita de ADEQUAÇÃO a
// qualquer MERCADO ou APLICAÇÃO EM PARTICULAR. Veja a licença para
// maiores detalhes. Você deve ter recebido uma cópia da GNU Affero
// General Public License, sob o título "LICENCA.txt", junto com este
// programa, se não, acesse http://www.gnu.org/licenses/
-->
<div style="margin-bottom:20px;" class="law_container" ng-init="hide_allText()" ng-repeat="(lawIndex, law) in laws">


<div style="position:relative; "  >

    <!-- titulos da tabela de lei -->
	
	<div id="lawTitles_{{law.lawProposal.stdCode}}" style="height:20px; position:absolute; display:none; width:100%; top:-20px;">
		<ul id="law_tab_titulos">
			<li style="width: 23%; border-right:1px solid white; background-color: #2B2828;"> lei ou projeto</li>
			<li style="width: 11%; border-right:1px solid white; background-color: #2B2828;"> sua opinião</li>
			<li style="width: 33%; border-right:1px solid white;"> opinião de seus representantes </li>
			<li style="width: 33%"> opinião de seus amigos </li>
		</ul>
	</div>
	<div id="lawTitlesExt_{{law.lawProposal.stdCode}}" style="height:20px; position:absolute; background-color: #2B2828; display:none; width:100%; top:-20px;">
		<ul id="law_tab_titulos">
			<li style="width: 249px; border-right:1px solid white; "> lei ou projeto</li>
			<li style="width: 499px;"> opiniões </li>
		</ul>
	</div>
	
	<!-- lei compacta -->
	
	<div ng-mouseover="show_law_text(law.lawProposal.stdCode)" ng-mouseleave="hide_law_text(law.lawProposal.stdCode)">
		<ul id="law_container_{{law.lawProposal.stdCode}}_normal" class="law_box_compact">
			<li id="law_infos_compact" style="width: 23%; height:100%; border-width: 1px; border-style: solid; border-color: #BCBEC0;">
			<h2 style="font-size:16px; padding-bottom:4px">{{law.lawProposal.prefix}} {{law.lawProposal.stdCode}}/{{law.lawProposal.year}}</h2>
			<h4 style="font-size:11px; font-height:105%;">{{law.lawProposal.description | characters: 100}}</h4>
			<ul style="padding-top:0px;">
				<li>
				<h3>arvore</h3>
				</li>
				<li>
				<h3>parques</h3>
				</li>
				<li>
				<h3>reforma</h3>
				</li>
			</ul>
			<div style="position:absolute; left:100%; top:100%; margin-left: -20px; margin-top: -20px;">
				<a href ng-click="showExtendedLaw(law.lawProposal.stdCode)"><i class="icone-mais_small"></i></a>
			</div>
			</li>
			<li id="user_opinion" style="width: 11%; border-width: 1px; height:100%; border-style: solid; border-color: #BCBEC0">
			<div >
			<div id="compactLaw_userOpinionBtn" class="voteBtn_contra_pr" >
			<div data-toggle="tooltip" data-placement="left" title="Opinião prevista pelo sistema" id='example'>
<<<<<<< HEAD
				 contra
=======
				 {{mapRateToText(law.vote.predictedRate)}}?
>>>>>>> Ajustando respostas JSON para leis recomendadas
				 </div>
			</div><i  id="qMark_userOpinionBtn" class="icone-interrogacao" style="position: absolute; right: -3px; top: 0; background-size: 15px auto;"></i>
			<h1><a type="button" href ng-click="showExtendedLaw(law.stdCode)">(quer mudar?)</a></h1>
			</div>
			<hr>
			<h2>{{law.lawProposal.priorityStatus}}</h2>
			
			</li>
			<li id="representante_opinion" style="width: 33%; border-width: 1px; height:100%; border-style: solid; position:relative; border-color: #BCBEC0;">
			<div>
				<ul>
					<label ng-repeat="congressman in law.representatives.slice(0,4)">
					<li class="{{mapRateToClass(congressman.vote.predictedRate)}}">
					<div style="width:50px; height:50px; overflow:hidden;">
						<img src="{{congressman.congressmanInfo.photoUrl}}" alt="{{congressman.congressmanInfo.shortName}}" style="width: 100%">
					</div>
					<h1 class="hideable hd{{law.lawProposal.stdCode}}"> {{mapRateToText(congressman.vote.predictedRate)}} </h1>
					</li>
					</label>
				</ul>
			</div>
			<div style="position:absolute; left:100%; bottom:20px; margin-left: -20px;">
				<a href ng-click="show_congressmanBox(law.lawProposal.stdCode, '0'); showExtendedLaw(law.lawProposal.stdCode) "><i class="icone-mais_small"></i></a>
				</li>
				<li id="friends_opinion" c style="width: 33%; height:100%; border-width: 1px; border-style: solid; position:relative; border-color: #BCBEC0;">
				<ul>
					<a href>
					<li class="amigo_icon_big afavor"><img src="/amigo1.jpg" alt="logo">
					<h1 class="hideable hd{{law.lawProposal.stdCode}}"> a favor</li>
					<li class="amigo_icon_big parfavor"><img src="/amigo2.jpg" alt="logo">
					<h1 class="hideable hd{{law.lawProposal.stdCode}}"> parc. favor </li>
					<li class="amigo_icon_big contra"><img src="/amigo3.jpg" alt="logo">
					<h1 class="hideable hd{{law.lawProposal.stdCode}}"> contra </li>
					<li class="amigo_icon_big contra"><img src="/amigo4.jpg" alt="logo">
					<h1 class="hideable hd{{law.lawProposal.stdCode}}"> contra </li>
					</a>
				</ul>
				<div style="position:absolute; left:100%; bottom:20px; margin-left: -20px;">
					<a href ng-click="showExtendedLaw(law.lawProposal.stdCode)"><i class="icone-mais_small"></i></a>
				</div>
				</li>
				<!-- caixa de ações retratil -->
				<div id="user_actions_{{law.lawProposal.stdCode}}" style="position:absolute; display:none; left:5px; bottom:0px; background-color: #BCBEC0; opacity:0.8">
					<ul id="law_icons">
						<li><i class="icone-campanha icone20px"></i></li>
						<a data-toggle="modal" data-target="#mensagemModal" href><li><i class="icone-mensagem"></i></li></a>
						<li><i class="icone-ban"></i></li>
						<li><i class="icone-fb"></i></li>
						</ul>
				</div>
				<!--------------------------->
			</ul>
		</div>
	</div>
	
	
	<!-- extended law -->
	
	
	<div ng-mouseover="show_ExtLaw_things(law.lawProposal.stdCode)" ng-mouseleave="hide_ExtLaw_things(law.lawProposal.stdCode)">
		<ul id="law_container_{{law.lawProposal.stdCode}}_extended" class="law_box_full" style="display:none">
			<li id="law_infos_full" style="width: 33%; height:100%;border-width: 1px; border-style: solid;position:relative; border-color: #BCBEC0;">
			<h2>Nro. {{law.lawProposal.typeId}} {{law.lawProposal.stdCode}}/{{law.lawProposal.year}}</h2>
			<h4>{{law.lawProposal.description | characters: 400}} <a href="{{law.lawProposal.url}}" target="_blank" ><i class="icone-mais_small"></i></a></h4>
			<ul style="padding-top:5px; overflow:hidden; max-height:70px">
				<li>
				<h3>arvore</h3>
				</li>
				<li>
				<h3>parques</h3>
				</li>
				<li>
				<h3>reforma</h3>
				</li>
				<li>
				<h3>ambiente</h3>
				</li>
				<li>
				<h3>parques</h3>
				</li>
				<li>
				<h3>reforma</h3>
				</li>
			</ul>
			</li>
			<li id="law_stats_full" style="width: 67%; height:100%;border-width: 1px; border-style: solid;position:relative; padding: 10px; border-color: #BCBEC0;">
			<div class="law_userRating">
				<label style="position:relative; float:left; " class="grid_2"> VOCÊ</label>
				<ul id="voteBtns_{{law.lawProposal.stdCode}}" class="vote_btns">
					<a href ng-click="vote('0',law)">
					<li id="btn_0_{{law.lawProposal.stdCode}}" class="voteBtn_contra_pr progress-striped" >contra</li>
					</a>
					<a href ng-click="vote('1',law)">
					<li id="btn_1_{{law.lawProposal.stdCode}}" class="voteBtn_parcontra_pr " >par. contra</li>
					</a>
					<a href ng-click="vote('2',law)">
					<li id="btn_2_{{law.lawProposal.stdCode}}" class="voteBtn_abstencao_pr " >abstenção</li>
					</a>
					<a href ng-click="vote('3',law)">
					<li id="btn_3_{{law.lawProposal.stdCode}}" class="voteBtn_parfavor_pr" >par. a favor</li>
					</a>
					<a href ng-click="vote('4',law)">
					<li id="btn_4_{{law.lawProposal.stdCode}}" class="voteBtn_afavor_pr " style="margin-right:0px">a favor</li>
					</a>
				</ul>
			</div>
			<hr style="width:100%; display:inline-block; margin: 10px 0px 0px; padding: 0px 10px;">
			<div class="ratingResults rating_Representante">
				<label style="position:relative; float:left; width:114px; background-color: #D1D3D4; padding-left:10px;" class="grid_2"> representantes </label>
				<ul class="grid_6">
					<a href ng-click="show_congressmanBox(law.lawProposal.stdCode, '0')">
					<li class="contra" style="width:10%;">—%</li>
					</a>
					<a href ng-click="show_congressmanBox(law.lawProposal.stdCode, '1')">
					<li class="parcontra" style="width:24%;">—%</li>
					</a>
					<a href ng-click="show_congressmanBox(law.lawProposal.stdCode, '2')">
					<li class="abstencao" style="width:30%;">—%</li>
					</a>
					<a href ng-click="show_congressmanBox(law.lawProposal.stdCode, '3')">
					<li class="parfavor" style="width:16%;">—%</li>
					</a>
					<a href ng-click="show_congressmanBox(law.lawProposal.stdCode, '4')">
					<li class="afavor" style="width:20%;">—%</li>
					</a>
				</ul>
			</div>
			
			<div id="congressmanOpinionBox_{{law.lawProposal.stdCode}}" style="height:130px; border-width: 3px; margin-top: -8px;; border-style:solid; width:478px; display:none; position:relative;">
				<a href ng-click="hide_congressmanBox(law.lawProposal.stdCode)"><i class="icon-red icon-remove" style="position:absolute; right:0px; top:3px;"></i></a>
				<ul class="lista_lawBox_congressman" style="height:100%">
					<label ng-repeat="congressman in congressmanByLaw_opinion">
					<li class="bouncy-slide-left">
					<div style=" display: table; margin: 0 auto;">
						<img src="{{congressman.congressmanInfo.photoUrl}}" alt="{{congressman.user.firstName}} {{congressman.user.lastName}}" height="50">
					</div>
					<div style=" display: table; margin: 0 auto;">
						 {{congressman.user.firstName}} {{congressman.user.lastName}}
					</div>
					</li>
					</label>
				</ul>
			</div>
			<div class="ratingResults rating_Friends">
				<label style="position:relative; float:left; width:114px; background-color: #D1D3D4; padding-left:10px;" class="grid_2"> amigos </label>
				<ul class="grid_6">
					<li class="contra" style="width:5%;">—%</li>
					<li class="parcontra" style="width:24%;">—%</li>
					<li class="abstencao" style="width:43%;">—%</li>
					<li class="parfavor" style="width:8%;">—%</li>
					<li class="afavor" style="width:20%;">—%</li>
				</ul>
			</div>
			<div class="ratingResults rating_Partidos">
				<label style="position:relative; float:left; width:114px; background-color: #D1D3D4; padding-left:10px;" class="grid_2"> partidos </label>
				<ul class="grid_6">
					<li class="contra" style="width:12%;">—%</li>
					<li class="parcontra" style="width:24%;">—%</li>
					<li class="abstencao" style="width:36%;">—%</li>
					<li class="parfavor" style="width:8%;">—%</li>
					<li class="afavor" style="width:20%;">—%</li>
				</ul>
			</div>
			<div class="user_action_full">
				<ul>
					<a href="#">
					<div style="width:50%; display:inline-block; float:left; padding-left:10px;">
						<a data-toggle="modal" data-target="#mensagemModal" href><li><i class="icone-mensagem"></i>
						<h1>escreva para seu(s) representantes(s)</h1></a>
						</li>
						<li><i class="icone-campanha icone20px"></i>
						<h1 > comece uma campanha para esta lei</h1>
						</li>
					</div>
					<div style="width:50%; display:inline-block; float:left; padding-left:10px; border-left: 2px solid #BCBEC0">
						<li><i class="icone-ban"></i>
						<h1>não tenho interesse nessa lei</h1>
						</li>
						<li><i class="icone-fb"></i>
						<h1>publicar na minha timeline</h1>
						</li>
						</a>
					</ul>
				</div>
				<div style="position:absolute; left:100%; top:100%; margin-left:-29px; margin-top:-29px; ">
					<a href="#">
					<a href ng-click="hideExtendedLaw(law.lawProposal.stdCode)"><i class="icone-menos"></i></a>
					</a>
				</div>
			</div>
			</li>
		</ul>
	</div>

	
<<<<<<< HEAD
<div id="popover-content" class="hide">
<div id="popover_{{law.stdCode}}" style="position:relative; margin:0px auto;">
=======
	<div id="popover-content" class="hide">
<div id="popover_{{law.lawProposal.stdCode}}" style="position:relative; margin:0px auto;">
>>>>>>> Ajustando respostas JSON para leis recomendadas
	<button  class="btn btn-success"><i class="icon-white icon-ok"></i></button>
	<button type="submit" class="btn btn-danger"><i class="icon-white icon-remove"></i></button>	
</div>	  
</div>


<div class="modal fade" id="mensagemModal_{{law.lawProposal.stdCode}}" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h4 class="modal-title" id="myModalLabel"><i class="icone-mensagem"></i>  Escreva para seus representantes</h4>
      </div>
      <div class="modal-body">
	  Selecione os representantes para quem você deseja enviar esta mensagem:
	  <div style="height:100px; border: 1px solid #CCCCCC;">
	  <span ng-repeat="congressman in CongressmanParContra">
      <h1>{{congressman.user.firstName}} {{congressman.user.lastName}}</h1><br>
	  </span>
	  </div>
            Escreva a sua mensagem:<br><textarea id="textarea" name="textarea">Texto</textarea>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Fechar</button>
        <button type="button" class="btn btn-success">Enviar</button>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

	
</div>


</div>

